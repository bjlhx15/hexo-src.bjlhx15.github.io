---
title: 004-高性能网站建设笔记-05样式表放在顶部、06脚本放在底部
categories:
  - performance-web
abbrlink: 372b80cc
date: 2020-02-13 16:50:05
---

摘要：

<!-- more -->

# 05样式表放在顶部【必须】

将样式表放在 head中，在html规范中，也明确规定Link需出现下head中，不限次数
``` HTML
    <link href="//storage.jd.com/sy-static.jd.com/1564972561844_index.min.css" rel="stylesheet" />
```
避免了白屏和无样式内容的闪烁问题

# 06脚本放在底部
DOM 加载是顺序加载[more](http://blog.bjlhx.top/categories/html_jd_css)

如果脚本在页面头部，可能会造成，页面阻塞。

## 并行下载-无意义，会发生脚本阻塞下载
如果页面编写了 script 标签，那么每个脚本都会产生一个http请求，进而进行下载。

在http 1.1规范，建议浏览器从每个主机名并行下载两个组件。简单理解，默认同时下载两个文件。

增加并行下载数量：可以简单使用CNAME（DNS别名）来将组件分别放到多个主机域名中。

## 缺点
增加了带宽以及cpu的使用

## 脚本阻塞下载

并行下载组件的优点多多，但是，在下载脚本时并行下载实际上是被禁用的--即使用了不同的主机名，浏览器也不会启动其他的下载。
原因：
1、脚本可能使用了document.write来修改页面内容，因此浏览器会等待，以确保页面能够恰当的布局。
2、为了保证脚本能够按照正确的顺序执行。

如果并行下载多个脚本，就无法保证响应是按照特定顺序到达浏览器的。如后面的先下载，结果后面的执行了，但内部有依赖于上一个脚本的代码，或导致js错误


